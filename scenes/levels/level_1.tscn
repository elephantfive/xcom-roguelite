[gd_scene load_steps=20 format=4 uid="uid://cklvl5jkm42wo"]

[ext_resource type="Script" uid="uid://3lgedd16ubha" path="res://scripts/campaign map/level.gd" id="1_nsrm0"]
[ext_resource type="PackedScene" uid="uid://btm7ebweprsqp" path="res://scenes/entities/enemy units/enemy.tscn" id="3_6761a"]
[ext_resource type="Script" uid="uid://dyvkvelj3l2fi" path="res://scripts/enemy units/fallen_blade.gd" id="4_sk5k4"]
[ext_resource type="Texture2D" uid="uid://dlgrcjo8l1ny4" path="res://assets/visual/character_models/fallen_archer.png" id="5_iav0o"]
[ext_resource type="Script" uid="uid://c7nojghq644q2" path="res://scripts/enemy units/fallen_archer.gd" id="5_oc4kc"]
[ext_resource type="Script" uid="uid://dkenoychsh6iw" path="res://scripts/main/camera.gd" id="6_excbq"]
[ext_resource type="Texture2D" uid="uid://dmnhb4tt8j5tm" path="res://assets/visual/character_models/fallen_blade.png" id="7_dnkej"]
[ext_resource type="Script" uid="uid://couw105c3bde4" path="res://addons/godot_state_charts/state_chart.gd" id="7_iav0o"]
[ext_resource type="Script" uid="uid://c1vp0ojjvaby1" path="res://addons/godot_state_charts/parallel_state.gd" id="8_dnkej"]
[ext_resource type="Script" uid="uid://jk2jm1g6q853" path="res://addons/godot_state_charts/compound_state.gd" id="9_mm8aj"]
[ext_resource type="Script" uid="uid://cytafq8i1y8qm" path="res://addons/godot_state_charts/atomic_state.gd" id="10_wtwp4"]
[ext_resource type="Script" uid="uid://cf1nsco3w0mf6" path="res://addons/godot_state_charts/transition.gd" id="11_iwr0g"]
[ext_resource type="Texture2D" uid="uid://6p023c337bxg" path="res://assets/visual/environment/testtilemap.png" id="14_mm8aj"]

[sub_resource type="NavigationPolygon" id="NavigationPolygon_dnkej"]
vertices = PackedVector2Array(32, 32, -32, 32, -32, -32, 32, -32)
polygons = Array[PackedInt32Array]([PackedInt32Array(0, 1, 2, 3)])
outlines = Array[PackedVector2Array]([PackedVector2Array(-32, -32, 32, -32, 32, 32, -32, 32)])
agent_radius = 0.0

[sub_resource type="NavigationPolygon" id="NavigationPolygon_wtwp4"]
vertices = PackedVector2Array(32, 32, -32, 32, -32, -32, 32, -32)
polygons = Array[PackedInt32Array]([PackedInt32Array(0, 1, 2, 3)])
outlines = Array[PackedVector2Array]([PackedVector2Array(-32, -32, 32, -32, 32, 32, -32, 32)])
agent_radius = 0.0

[sub_resource type="NavigationPolygon" id="NavigationPolygon_bahl2"]
vertices = PackedVector2Array(32, 32, -32, 32, -32, -32, 32, -32)
polygons = Array[PackedInt32Array]([PackedInt32Array(0, 1, 2, 3)])
outlines = Array[PackedVector2Array]([PackedVector2Array(-32, -32, 32, -32, 32, 32, -32, 32)])
agent_radius = 0.0

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_wtwp4"]
texture = ExtResource("14_mm8aj")
texture_region_size = Vector2i(64, 64)
0:0/0 = 0
1:0/0 = 0
1:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-32, -32, 32, -32, 32, 32, -32, 32)
1:0/0/navigation_layer_2/polygon = SubResource("NavigationPolygon_dnkej")
1:0/0/custom_data_0 = "wall"
2:0/0 = 0
2:0/0/navigation_layer_1/polygon = SubResource("NavigationPolygon_wtwp4")
3:0/0 = 0
0:1/0 = 0
1:1/0 = 0
2:1/0 = 0
2:1/0/navigation_layer_0/polygon = SubResource("NavigationPolygon_bahl2")
3:1/0 = 0
0:2/0 = 0
1:2/0 = 0
2:2/0 = 0
3:2/0 = 0
0:3/0 = 0
1:3/0 = 0
2:3/0 = 0
3:3/0 = 0

[sub_resource type="TileSet" id="TileSet_iwr0g"]
tile_size = Vector2i(64, 64)
physics_layer_0/collision_layer = 4
physics_layer_0/collision_mask = 0
navigation_layer_0/layers = 1
navigation_layer_1/layers = 2
navigation_layer_2/layers = 4
custom_data_layer_0/name = "type"
custom_data_layer_0/type = 4
sources/2 = SubResource("TileSetAtlasSource_wtwp4")

[sub_resource type="NavigationPolygon" id="NavigationPolygon_iwr0g"]

[node name="Level 1" type="Node2D"]
script = ExtResource("1_nsrm0")
level_name = "Level 1"
random_rewards = ["nidys"]
rewards = Dictionary[String, int]({
"money": 100
})

[node name="Environment" type="Node" parent="."]
unique_name_in_owner = true

[node name="Entities" type="Node" parent="."]

[node name="Fallen Archer" parent="Entities" instance=ExtResource("3_6761a")]
position = Vector2(969, 143)
script = ExtResource("5_oc4kc")
texture = ExtResource("5_iav0o")
attack_distance = 500

[node name="Fallen Blade2" parent="Entities" instance=ExtResource("3_6761a")]
position = Vector2(190, 715)
script = ExtResource("4_sk5k4")
texture = ExtResource("7_dnkej")

[node name="Fallen Blade3" parent="Entities" instance=ExtResource("3_6761a")]
position = Vector2(1134, 727)
script = ExtResource("4_sk5k4")
texture = ExtResource("7_dnkej")

[node name="PlayerSpawns" type="Node" parent="."]

[node name="PlayerSpawn 0" type="Node2D" parent="PlayerSpawns"]
position = Vector2(147, 196)

[node name="PlayerSpawn 1" type="Node2D" parent="PlayerSpawns"]
position = Vector2(160, 325)

[node name="Camera2D" type="Camera2D" parent="."]
unique_name_in_owner = true
anchor_mode = 0
script = ExtResource("6_excbq")

[node name="StateChart" type="Node" parent="Camera2D"]
script = ExtResource("7_iav0o")
metadata/_custom_type_script = "uid://couw105c3bde4"

[node name="ParallelState" type="Node" parent="Camera2D/StateChart"]
script = ExtResource("8_dnkej")

[node name="Moving" type="Node" parent="Camera2D/StateChart/ParallelState"]
script = ExtResource("9_mm8aj")
initial_state = NodePath("NotMoving")

[node name="NotMoving" type="Node" parent="Camera2D/StateChart/ParallelState/Moving"]
script = ExtResource("10_wtwp4")

[node name="Transition" type="Node" parent="Camera2D/StateChart/ParallelState/Moving/NotMoving"]
script = ExtResource("11_iwr0g")
to = NodePath("../../Moving")
event = &"moving"
delay_in_seconds = "0.0"

[node name="Moving" type="Node" parent="Camera2D/StateChart/ParallelState/Moving"]
script = ExtResource("10_wtwp4")

[node name="Transition" type="Node" parent="Camera2D/StateChart/ParallelState/Moving/Moving"]
script = ExtResource("11_iwr0g")
to = NodePath("../../NotMoving")
event = &"not_moving"
delay_in_seconds = "0.0"

[node name="TileMapLayer" type="TileMapLayer" parent="."]
tile_map_data = PackedByteArray("AAAMAAwAAgABAAAAAAAMAAsAAgABAAAAAAANAAoAAgABAAAAAAANAAsAAgABAAAAAAAMAAoAAgABAAAAAAALAAwAAgABAAAAAAANAAkAAgABAAAAAAAOAAkAAgABAAAAAAANAAgAAgABAAAAAAAOAAgAAgABAAAAAAAOAAcAAgABAAAAAAANAAcAAgABAAAAAAAOAAYAAgABAAAAAAAPAAYAAgABAAAAAAAPAAcAAgABAAAAAAAPAAUAAgABAAAAAAAOAAUAAgABAAAAAAAPAAQAAgABAAAAAAAQAAUAAgABAAAAAAAIAAQAAgABAAAAAAAJAAMAAgABAAAAAAAKAAIAAgABAAAAAAALAAEAAgABAAAAAAAKAAEAAgABAAAAAAALAAIAAgABAAAAAAAKAAMAAgABAAAAAAAJAAIAAgABAAAAAAAIAAMAAgABAAAAAAAJAAQAAgABAAAAAAAGAAkAAgABAAAAAAAGAAgAAgABAAAAAAAFAAgAAgABAAAAAAAFAAcAAgABAAAAAAAEAAcAAgABAAAAAAAEAAYAAgABAAAAAAAFAAYAAgABAAAAAAADAAYAAgABAAAAAAADAAUAAgABAAAAAAAEAAUAAgABAAAAAAAGAAcAAgABAAAAAAAFAAkAAgABAAAAAAAMAAEAAgABAAAAAAALAAAAAgABAAAAAAAMAAAAAgABAAAAAAAAAAgAAgACAAEAAAAAAAkAAgACAAEAAAAAAAoAAgACAAEAAAAAAAsAAgACAAEAAAAAAAwAAgACAAEAAAAAAA0AAgACAAEAAAABAAgAAgACAAEAAAABAAkAAgACAAEAAAABAAoAAgACAAEAAAABAAsAAgACAAEAAAABAAwAAgACAAEAAAABAA0AAgACAAEAAAACAAgAAgACAAEAAAACAAkAAgACAAEAAAACAAoAAgACAAEAAAACAAsAAgACAAEAAAACAAwAAgACAAEAAAACAA0AAgACAAEAAAADAAgAAgACAAEAAAADAAkAAgACAAEAAAADAAoAAgACAAEAAAADAAsAAgACAAEAAAADAAwAAgACAAEAAAADAA0AAgACAAEAAAAEAAgAAgACAAEAAAAEAAkAAgACAAEAAAAEAAoAAgACAAEAAAAEAAsAAgACAAEAAAAEAAwAAgACAAEAAAAEAA0AAgACAAEAAAAFAAoAAgACAAEAAAAFAAsAAgACAAEAAAAFAAwAAgACAAEAAAAFAA0AAgACAAEAAAAGAAoAAgACAAEAAAAGAAsAAgACAAEAAAAGAAwAAgACAAEAAAAGAA0AAgACAAEAAAAHAAoAAgACAAEAAAAHAAsAAgACAAEAAAAHAAwAAgACAAEAAAAHAA0AAgACAAEAAAAIAAoAAgACAAEAAAAIAAsAAgACAAEAAAAIAAwAAgACAAEAAAAIAA0AAgACAAEAAAAJAAoAAgACAAEAAAAJAAsAAgACAAEAAAAJAAwAAgACAAEAAAAJAA0AAgACAAEAAAAKAAoAAgACAAEAAAAKAAsAAgACAAEAAAAKAAwAAgACAAEAAAAKAA0AAgACAAEAAAAHAAcAAgACAAEAAAAHAAgAAgACAAEAAAAHAAkAAgACAAEAAAAIAAcAAgACAAEAAAAIAAgAAgACAAEAAAAIAAkAAgACAAEAAAAJAAcAAgACAAEAAAAJAAgAAgACAAEAAAAJAAkAAgACAAEAAAAKAAcAAgACAAEAAAAKAAgAAgACAAEAAAAKAAkAAgACAAEAAAALAAcAAgACAAEAAAALAAgAAgACAAEAAAALAAkAAgACAAEAAAAMAAcAAgACAAEAAAAMAAgAAgACAAEAAAAMAAkAAgACAAEAAAAKAAQAAgACAAEAAAAKAAUAAgACAAEAAAAKAAYAAgACAAEAAAALAAQAAgACAAEAAAALAAUAAgACAAEAAAALAAYAAgACAAEAAAAMAAQAAgACAAEAAAAMAAUAAgACAAEAAAAMAAYAAgACAAEAAAANAAQAAgACAAEAAAANAAUAAgACAAEAAAANAAYAAgACAAEAAAAGAAUAAgACAAEAAAAGAAYAAgACAAEAAAAHAAUAAgACAAEAAAAHAAYAAgACAAEAAAAIAAUAAgACAAEAAAAIAAYAAgACAAEAAAAJAAUAAgACAAEAAAAJAAYAAgACAAEAAAAFAAMAAgACAAEAAAAFAAQAAgACAAEAAAAFAAUAAgACAAEAAAAGAAMAAgACAAEAAAAGAAQAAgACAAEAAAAHAAMAAgACAAEAAAAHAAQAAgACAAEAAAACAAMAAgACAAEAAAACAAQAAgACAAEAAAADAAMAAgACAAEAAAADAAQAAgACAAEAAAAEAAMAAgACAAEAAAAEAAQAAgACAAEAAAAAAAUAAgACAAEAAAAAAAYAAgACAAEAAAAAAAcAAgACAAEAAAABAAUAAgACAAEAAAABAAYAAgACAAEAAAABAAcAAgACAAEAAAACAAUAAgACAAEAAAACAAYAAgACAAEAAAACAAcAAgACAAEAAAADAAcAAgACAAEAAAALAA0AAgACAAEAAAAMAA0AAgACAAEAAAANAA0AAgACAAEAAAAOAA0AAgACAAEAAAAPAA0AAgACAAEAAAAQAA0AAgACAAEAAAARAA0AAgACAAEAAAASAA0AAgACAAEAAAATAA0AAgACAAEAAAAUAA0AAgACAAEAAAAVAA0AAgACAAEAAAAWAA0AAgACAAEAAAANAAwAAgACAAEAAAAOAAwAAgACAAEAAAAPAAwAAgACAAEAAAAQAAwAAgACAAEAAAARAAwAAgACAAEAAAASAAwAAgACAAEAAAATAAwAAgACAAEAAAAUAAwAAgACAAEAAAAVAAwAAgACAAEAAAAWAAwAAgACAAEAAAAOAAoAAgACAAEAAAAOAAsAAgACAAEAAAAPAAoAAgACAAEAAAAPAAsAAgACAAEAAAAQAAoAAgACAAEAAAAQAAsAAgACAAEAAAARAAoAAgACAAEAAAARAAsAAgACAAEAAAASAAoAAgACAAEAAAASAAsAAgACAAEAAAATAAoAAgACAAEAAAATAAsAAgACAAEAAAAUAAoAAgACAAEAAAAUAAsAAgACAAEAAAAVAAoAAgACAAEAAAAVAAsAAgACAAEAAAAWAAoAAgACAAEAAAAWAAsAAgACAAEAAAAPAAgAAgACAAEAAAAPAAkAAgACAAEAAAAQAAgAAgACAAEAAAAQAAkAAgACAAEAAAARAAgAAgACAAEAAAARAAkAAgACAAEAAAASAAgAAgACAAEAAAASAAkAAgACAAEAAAATAAgAAgACAAEAAAATAAkAAgACAAEAAAAUAAgAAgACAAEAAAAUAAkAAgACAAEAAAAVAAgAAgACAAEAAAAVAAkAAgACAAEAAAAWAAgAAgACAAEAAAAWAAkAAgACAAEAAAAQAAYAAgACAAEAAAAQAAcAAgACAAEAAAARAAYAAgACAAEAAAARAAcAAgACAAEAAAASAAYAAgACAAEAAAASAAcAAgACAAEAAAATAAYAAgACAAEAAAATAAcAAgACAAEAAAAUAAYAAgACAAEAAAAUAAcAAgACAAEAAAAVAAYAAgACAAEAAAAVAAcAAgACAAEAAAAWAAYAAgACAAEAAAAWAAcAAgACAAEAAAARAAQAAgACAAEAAAARAAUAAgACAAEAAAASAAQAAgACAAEAAAASAAUAAgACAAEAAAATAAQAAgACAAEAAAATAAUAAgACAAEAAAAUAAQAAgACAAEAAAAUAAUAAgACAAEAAAAVAAQAAgACAAEAAAAVAAUAAgACAAEAAAAWAAQAAgACAAEAAAAWAAUAAgACAAEAAAALAAMAAgACAAEAAAAMAAMAAgACAAEAAAANAAMAAgACAAEAAAAOAAMAAgACAAEAAAAPAAMAAgACAAEAAAAQAAMAAgACAAEAAAARAAMAAgACAAEAAAASAAMAAgACAAEAAAATAAMAAgACAAEAAAAUAAMAAgACAAEAAAAVAAMAAgACAAEAAAAWAAMAAgACAAEAAAAQAAQAAgACAAEAAAAOAAQAAgACAAEAAAAMAAIAAgACAAEAAAANAAIAAgACAAEAAAAOAAIAAgACAAEAAAAPAAIAAgACAAEAAAAQAAIAAgACAAEAAAARAAIAAgACAAEAAAASAAIAAgACAAEAAAATAAIAAgACAAEAAAAUAAIAAgACAAEAAAAVAAIAAgACAAEAAAAWAAIAAgACAAEAAAANAP//AgACAAEAAAANAAAAAgACAAEAAAANAAEAAgACAAEAAAAOAP//AgACAAEAAAAOAAAAAgACAAEAAAAOAAEAAgACAAEAAAAPAP//AgACAAEAAAAPAAAAAgACAAEAAAAPAAEAAgACAAEAAAAQAP//AgACAAEAAAAQAAAAAgACAAEAAAAQAAEAAgACAAEAAAARAP//AgACAAEAAAARAAAAAgACAAEAAAARAAEAAgACAAEAAAASAP//AgACAAEAAAASAAAAAgACAAEAAAASAAEAAgACAAEAAAATAP//AgACAAEAAAATAAAAAgACAAEAAAATAAEAAgACAAEAAAAUAP//AgACAAEAAAAUAAAAAgACAAEAAAAUAAEAAgACAAEAAAAVAP//AgACAAEAAAAVAAAAAgACAAEAAAAVAAEAAgACAAEAAAAWAP//AgACAAEAAAAWAAAAAgACAAEAAAAWAAEAAgACAAEAAAADAP//AgACAAEAAAAEAP//AgACAAEAAAAFAP//AgACAAEAAAAGAP//AgACAAEAAAAHAP//AgACAAEAAAAIAP//AgACAAEAAAAJAP//AgACAAEAAAAKAP//AgACAAEAAAALAP//AgACAAEAAAAMAP//AgACAAEAAAD9////AgACAAEAAAD9/wAAAgACAAEAAAD9/wEAAgACAAEAAAD+////AgACAAEAAAD+/wAAAgACAAEAAAD+/wEAAgACAAEAAAD/////AgACAAEAAAD//wAAAgACAAEAAAD//wEAAgACAAEAAAAAAP//AgACAAEAAAAAAAAAAgACAAEAAAAAAAEAAgACAAEAAAABAP//AgACAAEAAAABAAAAAgACAAEAAAABAAEAAgACAAEAAAACAP//AgACAAEAAAACAAAAAgACAAEAAAACAAEAAgACAAEAAAADAAAAAgACAAEAAAADAAEAAgACAAEAAAAEAAAAAgACAAEAAAAEAAEAAgACAAEAAAAFAAAAAgACAAEAAAAFAAEAAgACAAEAAAAGAAAAAgACAAEAAAAGAAEAAgACAAEAAAAHAAAAAgACAAEAAAAHAAEAAgACAAEAAAAIAAAAAgACAAEAAAAIAAEAAgACAAEAAAAJAAAAAgACAAEAAAAJAAEAAgACAAEAAAD9/wIAAgACAAEAAAD9/wMAAgACAAEAAAD9/wQAAgACAAEAAAD9/wUAAgACAAEAAAD9/wYAAgACAAEAAAD+/wIAAgACAAEAAAD+/wMAAgACAAEAAAD+/wQAAgACAAEAAAD+/wUAAgACAAEAAAD+/wYAAgACAAEAAAD//wIAAgACAAEAAAD//wMAAgACAAEAAAD//wQAAgACAAEAAAD//wUAAgACAAEAAAD//wYAAgACAAEAAAAAAAIAAgACAAEAAAAAAAMAAgACAAEAAAAAAAQAAgACAAEAAAABAAIAAgACAAEAAAABAAMAAgACAAEAAAABAAQAAgACAAEAAAACAAIAAgACAAEAAAADAAIAAgACAAEAAAAEAAIAAgACAAEAAAAFAAIAAgACAAEAAAAGAAIAAgACAAEAAAAHAAIAAgACAAEAAAAIAAIAAgACAAEAAAAKAAAAAgACAAEAAAD9/wcAAgACAAEAAAD9/wgAAgACAAEAAAD9/wkAAgACAAEAAAD9/woAAgACAAEAAAD9/wsAAgACAAEAAAD9/wwAAgACAAEAAAD9/w0AAgACAAEAAAD+/wcAAgACAAEAAAD+/wgAAgACAAEAAAD+/wkAAgACAAEAAAD+/woAAgACAAEAAAD+/wsAAgACAAEAAAD+/wwAAgACAAEAAAD+/w0AAgACAAEAAAD//wcAAgACAAEAAAD//wgAAgACAAEAAAD//wkAAgACAAEAAAD//woAAgACAAEAAAD//wsAAgACAAEAAAD//wwAAgACAAEAAAD//w0AAgACAAEAAAALAAsAAgACAAEAAAALAAoAAgACAAEAAAA=")
tile_set = SubResource("TileSet_iwr0g")

[node name="NavigationRegion2D" type="NavigationRegion2D" parent="TileMapLayer"]
navigation_polygon = SubResource("NavigationPolygon_iwr0g")

[connection signal="state_physics_processing" from="Camera2D/StateChart/ParallelState/Moving/Moving" to="Camera2D" method="_on_moving_state_physics_processing"]
